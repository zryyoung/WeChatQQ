# 更新日志

## v4.0.0 更新说明

> 本次更新聚焦于 **语音合成系统的全面升级**，并在保持兼容性的基础上，适度回归 Auto.js 平台，实现更灵活的语音控制与更强大的语音包支持。

---

### 🧠 语音系统全面升级

- **多引擎语音合成支持**  
  不再局限于微软 TTS，新增接入 **MultiTTS**，支持多种 AI 音色模型，调用转发服务即可实现语音合成。

- **语音包导入机制**  
  支持用户手动下载并导入语音包，自定义配置后即可使用，拟真度更高、情感更丰富。

- **统一合成流程逻辑**  
  封装语音合成流程，自动识别引擎类型与参数配置，调用更顺畅、逻辑更清晰。

---

### 🧩 架构调整与兼容性增强

- **回归 Auto.js 平台（基于 v6 重新打包）**  
  使用 Auto.js v6 内核重构，结合原生资源管理逻辑，提升执行灵活性，适配更复杂语音控制逻辑。

- **安装包体积增长**  
  因引入 Auto.js 核心与多语音逻辑，安装包体积由 v3 的 100KB 增至约 **10MB+**。

- **支持多架构平台**  
  完美兼容 Android 5.0~15，支持 **32 位 / 64 位 / armeabi-v7a / arm64-v8a / x86 / x86_64** 架构，覆盖主流安卓设备。

- **运行内存占用适中**  
  程序运行后内存占用约 **200MB** 左右，控制在合理范围，性能与资源消耗平衡。
---

### 🎨 界面与体验

- **界面保持简约**  
  本次聚焦于核心功能升级，界面仍采用原始风格，操作逻辑清晰。

- **后续界面优化计划**  
  未知

---

### ✅ 升级建议

- 建议先卸载 v3 再安装 v4，以避免旧逻辑干扰；
- 轻量稳定用户可继续使用 v3.0.0；
- 若首次使用 MultiTTS，请先下载导入配置语音包与引擎，授予相应的权限，设置里面开启转换服务。

---

如有问题欢迎反馈，感谢支持！

## v3.0.0 版本说明

本次更新为**完全重构版本**，由 Auto.js 平台迁移至 AIDE Pro，并以原生 Java 编写，实现更高的执行效率与更小的体积占用。适合追求稳定性与性能的用户升级使用。

### 🚀 架构重构与性能提升

- **全平台代码重写**：  
  摒弃 Auto.js 与 Shell 脚本依赖，重构为 Java 原生应用，系统兼容性与执行效率大幅提升。

- **打包方式变更**：  
  采用 AIDE Pro 离线编译，无需依赖外部开发环境即可直接安装运行，首次启动速度明显加快，64位。

- **运行效率显著优化**：  
  核心处理流程更轻量，替换语音速度更快，稳定性更高，卡顿问题大幅减少。

- **运行内存占用减半**：  
  由原先的双进程架构（Auto.js 主进程 + Shell 子进程）优化为单进程运行，平均内存占用由 **约 400MB** 降至 **约 200MB** 甚至更少，更高效更稳定。

### ⚙ 功能更新与逻辑优化

- **语音替换逻辑精简**：  
  统一音频处理入口，自动识别 QQ / 微信语音路径，避免路径错误导致的失败。

- **错误提示机制增强**：  
  新增运行日志提示及友好错误提示，方便用户定位问题。

### 🎨 UI 与用户体验

- **精简界面布局**：  
  虽界面设计相较前版略显朴素，但交互流程更清晰，操作路径更短。

- **轻量化设计**：  
  应用体积缩减至原来的 1/50，由原来的约 **5MB** 优化至仅 **100KB** 左右，极大降低存储占用与加载压力。

---

### ✅ 升级建议

- 建议卸载旧版后全新安装 v3.0.0，以确保不残留旧逻辑或缓存。
- 若对美观要求较高，可等待未来 v3.x 系列的界面优化更新。

---

如在使用过程中遇到问题，欢迎随时反馈，持续改进。

## v2.0.0 版本说明

本次更新对核心架构进行了重构，显著提升了稳定性与用户体验。详情如下：

### ✨ 新特性 & 优化

- **执行逻辑重构**：  
  移除原有 Shell 脚本文件，改为直接在代码中执行 Shell 命令，整体运行更流畅，响应更迅速。

- **UI 界面优化**：  
  用户界面更为整洁，视觉层次更加清晰，交互体验提升。

- **代码结构优化**：  
  精简核心逻辑，提升代码可读性与维护性。

### 🐛 Bug 修复

- 修复了 **微软 TTS** 功能中，输入文本包含空格时无法转换的问题。  
- 修复了 **选择音频文件路径包含空格** 时无法识别的问题。  
- 修复了 **音频转换过程中导致界面白屏需重启** 的严重问题，现已稳定运行。

---

如有更多建议或遇到问题，欢迎反馈！

## v1.0.0 - 首个版本发布

### 功能亮点
- 支持将文字转为语音并替换为 QQ/微信语音消息
- 支持选择本地音频文件进行语音替换
- 微信使用 AMR 格式，QQ 使用 Silk 格式，自动匹配并转换
- 基于 Root + Termux 的 FFmpeg 和 Python 工具链

### 已知 Bug
1. **文本输入限制**：
   - 文本中如果包含空格，部分发音人将无法合成语音，可能报错或无响应。
2. **大文件转换卡死**：
   - 若音频文件过大（如 `35MB.flac`），转换过程可能导致应用无响应、界面白屏。
   - 虽然最终能替换成功，但需手动重启应用。
   - 如果之前转换过同样的文件，则会跳过转换，直接替换，速度显著提升。

### 使用建议
- 避免输入含空格的文本或使用支持中文的发音人。
- 尽量避免选择体积过大的音频文件，推荐使用小于 10MB 的 `.mp3`、`.wav` 等格式。
- 若转换后出现卡顿白屏，重启应用可恢复正常。